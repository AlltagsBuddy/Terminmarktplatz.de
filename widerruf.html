<!-- FILE: widerruf.html -->
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Widerruf & Widerrufsbelehrung | Terminmarktplatz</title>
  <meta name="description" content="Informationen zum gesetzlichen Widerrufsrecht für Verbraucher:innen, Ausnahmen, Folgen des Widerrufs sowie ein Muster-Widerrufsformular.">
  <meta name="theme-color" content="#6f53ff" />

  <!-- OG -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Widerruf & Widerrufsbelehrung">
  <meta property="og:description" content="Alles Wichtige zum Widerrufsrecht – inkl. Muster-Widerrufsformular.">
  <meta property="og:image" content="/static/og-cover.png">

  <base href="/">
  <link rel="icon" href="/static/favicon.png" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css?v=20251010" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YNZ8GW523R"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YNZ8GW523R');
  </script>

  <style>
    .legal h2{margin-top:8px}
    .legal h3{margin:14px 0 8px}
    .legal p{margin:8px 0}
    .legal ul{margin:6px 0 12px 18px}
    .legal li{margin:4px 0}
    .note{font-size:14px; color:var(--ink-dim)}
    .print-area{background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03)); padding:16px; border:1px solid var(--border); border-radius:16px}
    .mf-grid{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    .mf-grid .full{grid-column:1 / -1}
    .mf-grid label{font-weight:700; font-size:14px}
    .mf-grid input,.mf-grid textarea{
      width:100%; padding:10px; border-radius:12px; border:1px solid var(--border); background:#fff; color:#0f172a
    }
    .mf-grid textarea{min-height:110px; resize:vertical}

    /* auth-in zunächst ausblenden – JS zeigt sie bei Login */
    .auth-in {
      display: none;
    }

    /* Weißer Menü-Button wie auf AGB/Technik/Preise/Suche/Suchende */
    .user-menu .btn {
      background:#ffffff;
      color:#0f172a;
      border:1px solid #cbd5e1;
      text-shadow:none;
      background-image:none;
    }

    /* HEADER + MENÜ – Menü direkt hinter Brand, Nav rechts */
    header .nav{
      display:flex;
      align-items:center;
      gap:16px;
    }

    header .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }

    /* Menü-Button direkt hinter „Terminmarktplatz“ */
    header .user-menu{
      display:block;
      position:relative;
      z-index:60;
      margin-left:12px; /* Abstand hinter Brand */
    }

    /* Hauptnavigation rechtsbündig */
    header .nav-links{
      display:flex;
      gap:12px;
      align-items:center;
      margin-left:auto;
    }

    /* Mobile-Optimierung */
    @media (max-width: 768px){
      header .nav{
        flex-wrap:wrap;
        gap:8px;
        padding-inline:16px;
        align-items:flex-start;
      }

      .brand-title{font-size:1.05rem}

      /* Brand links, Menü rechts in der ersten Zeile */
      header .user-menu{
        margin-left:auto;
      }

      /* Links zweite Zeile, zentriert */
      header .nav-links{
        display:flex;
        flex-wrap:wrap;
        justify-content:center;
        gap:8px;
        width:100%;
        text-align:center;
        margin-top:4px;
        margin-left:0;
      }
      header .nav-links a{
        font-size:0.9rem;
        padding:4px 8px;
      }

      .hero{
        padding:28px 0 14px !important;
      }
      .hero h1{
        font-size:1.6rem;
        line-height:1.25;
      }
      .hero .lead{
        font-size:0.95rem;
      }

      .panel{
        padding:14px;
        border-radius:16px;
      }

      .mf-grid{
        grid-template-columns:1fr;
      }

      .foot-grid{
        display:grid;
        grid-template-columns:1fr;
        gap:16px;
      }
      .foot-col{
        margin-top:4px;
      }
    }
  </style>

  <script>
  (function(){
    const API = (typeof window.API === 'string')
      ? window.API
      : ((h) => (h === 'localhost' || h === '127.0.0.1')
            ? 'http://127.0.0.1:5000'
            : 'https://api.terminmarktplatz.de')(location.hostname);

    const btn  = document.getElementById('userMenuBtn');
    const menu = document.getElementById('userMenu');
    if (!btn || !menu) return;

    function openMenu(open){
      menu.hidden = !open;
      btn.setAttribute('aria-expanded', String(open));
    }

    // Menü ein-/ausklappen
    btn.addEventListener('click', (e)=>{
      e.stopPropagation();
      openMenu(menu.hidden);
    });

    document.addEventListener('click', ()=> openMenu(false));
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') openMenu(false); });

    // Login-Status -> auth-in / auth-out steuern
    async function updateAuthUI(){
      let loggedIn = false;
      try{
        const res = await fetch(`${API}/me`, { credentials:'include' });
        loggedIn = res.ok;
      }catch(e){
        loggedIn = false;
      }

      document.querySelectorAll('.auth-in').forEach(el => {
        el.style.display = loggedIn ? '' : 'none';
      });
      document.querySelectorAll('.auth-out').forEach(el => {
        el.style.display = loggedIn ? 'none' : '';
      });
    }

    // Aktionen im Menü
    menu.addEventListener('click', async (e)=>{
      const el = e.target.closest('.item');
      if (!el) return;
      const action = el.dataset.action;

      if (action === 'logout'){
        try{
          await fetch(`${API}/auth/logout`, { method:'POST', credentials:'include' });
        }catch(_){}
        location.href = '/login.html';
      }

      if (action === 'delete'){
        const ok = confirm('Wirklich den gesamten Account mit allen Slots und Buchungen löschen? Dieser Schritt ist endgültig.');
        if (!ok) return;

        try{
          const res = await fetch(`${API}/me`, { method:'DELETE', credentials:'include' });
          if (res.ok){
            location.href = '/login.html?deleted=1';
          }else{
            const data = await res.json().catch(()=> ({}));
            alert(data?.error ? `Löschen fehlgeschlagen: ${data.error}` : 'Löschen fehlgeschlagen.');
          }
        }catch(err){
          alert('Netzwerkfehler – bitte später erneut versuchen.');
        }
      }
    });

    updateAuthUI();
  })();
  </script>

</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav"
         role="navigation"
         aria-label="Hauptnavigation">
      <!-- Logo / Brand -->
      <a class="brand" href="index.html" aria-label="Startseite">
        <div class="brand-logo" aria-hidden="true">
          <img src="/static/terminmarktplatz-logo.png"
               alt="Terminmarktplatz Logo"
               width="50" height="50">
        </div>
        <div class="brand-title">Terminmarktplatz</div>
      </a>

      <!-- User-Menü direkt hinter „Terminmarktplatz“ -->
      <div class="user-menu">
        <button id="userMenuBtn" class="btn" aria-haspopup="menu" aria-expanded="false">
          ☰ Menü
        </button>
        <div id="userMenu" class="menu" role="menu" hidden>
          <!-- nur sichtbar, wenn NICHT eingeloggt -->
          <a href="login.html?tab=login" class="item auth-out" role="menuitem">Anmelden</a>

          <!-- nur sichtbar, wenn eingeloggt -->
          <button type="button" class="item auth-in" data-action="logout" role="menuitem">Abmelden</button>
          <a href="anbieter-portal.html" class="item auth-in" role="menuitem">Profil</a>
          <a href="anbieter-portal.html#step-3" class="item auth-in" role="menuitem">Slot anlegen</a>
          <button class="item danger auth-in" data-action="delete" role="menuitem">Konto löschen</button>

          <!-- immer sichtbar -->
          <a href="kontakt.html" class="item" role="menuitem">Kontakt</a>
        </div>
      </div>

      <!-- Hauptnavigation rechts -->
      <nav class="nav-links">
        <a href="anbieter.html">Für Anbieter</a>
        <a href="suchende.html">Für Suchende</a>
        <a href="preise.html">Preise</a>
      </nav>
    </div>
  </header>


  <main>
    <!-- HERO -->
    <section class="hero" style="padding:40px 0 18px">
      <div class="container">
        <span class="badge">Rechtliches</span>
        <h1>Widerruf & Widerrufsbelehrung</h1>
        <p class="lead">
          Hier findest du Informationen zu deinem gesetzlichen Widerrufsrecht als Verbraucher:in, 
          zu möglichen Ausnahmen sowie ein Muster-Widerrufsformular zum Ausfüllen und Ausdrucken.
        </p>
      </div>
    </section>

    <!-- WIDERRUFSBELEHRUNG -->
    <section>
      <div class="container legal">
        <div class="panel">
          <h2>1. Widerrufsrecht</h2>
          <p>
            Wenn du Verbraucher:in bist, hast du grundsätzlich das Recht, binnen 
            <strong>vierzehn (14) Tagen</strong> ohne Angabe von Gründen einen Vertrag zu widerrufen,
            der unter Verwendung von Fernkommunikationsmitteln abgeschlossen wurde (Fernabsatzvertrag).
          </p>
          <p>
            Die Widerrufsfrist beträgt 14 Tage ab dem Tag des Vertragsschlusses. Bei der Buchung eines Termins 
            über Terminmarktplatz kommt der Vertrag <strong>zwischen dir und dem jeweiligen Anbieter</strong> zustande.
            Terminmarktplatz selbst wird nicht Vertragspartner der Behandlungs- bzw. Dienstleistungsverträge.
          </p>

          <h3>2. Ausnahmen vom Widerrufsrecht</h3>
          <p>
            Das Widerrufsrecht kann in bestimmten Fällen gesetzlich ausgeschlossen sein, z. B. bei
            <strong>Dienstleistungen im Zusammenhang mit Freizeitbetätigungen</strong>, 
            wenn der Vertrag für die Erbringung einen spezifischen Termin oder Zeitraum vorsieht 
            (vgl. § 312g Abs. 2 Nr. 9 BGB). Ob für deinen konkreten Termin ein Widerrufsrecht besteht, 
            hängt vom Einzelfall und von den Bedingungen des jeweiligen Anbieters ab.
          </p>

          <p class="note">
            Hinweis: Die konkreten Storno- und Umbuchungsbedingungen des Anbieters können von den gesetzlichen 
            Widerrufsregeln abweichen oder zusätzlich gelten. Bitte prüfe die Hinweise des jeweiligen Anbieters.
          </p>

          <h3>3. Widerrufsadresse</h3>
          <p>
            Der Widerruf ist grundsätzlich gegenüber dem <strong>jeweiligen Anbieter</strong> zu erklären, 
            mit dem du den Dienstleistungsvertrag geschlossen hast. Dessen Kontaktdaten erhältst du normalerweise 
            in der Terminbestätigung bzw. in den Angaben zum Slot.
          </p>

          <p class="note">
            Terminmarktplatz (AlltagsBuddy / Annett Hofmann, Steigerwaldstraße 35, 96191 Viereth, 
            E-Mail: info@terminmarktplatz.de) ist Vermittlerin der Plattform. Ein Widerruf gegenüber 
            Terminmarktplatz kann ggf. nur Verpflichtungen aus einem direkten Vertragsverhältnis mit 
            Terminmarktplatz betreffen (z. B. kostenpflichtige Anbieter-Pakete), nicht jedoch automatisch 
            die Verträge mit den einzelnen Anbietern.
          </p>

          <h3>4. Folgen des Widerrufs</h3>
          <p>
            Im Fall eines wirksamen Widerrufs sind die empfangenen Leistungen zurückzugewähren und 
            ggf. gezogene Nutzungen herauszugeben. Soweit du verlangt hast, dass die Dienstleistung 
            während der Widerrufsfrist beginnen soll, kann eine angemessene Vergütung für die bereits 
            erbrachte Leistung geschuldet sein.
          </p>

          <h3>5. Muster-Widerrufsformular</h3>
          <p>
            Nachfolgend findest du ein unverbindliches Muster-Widerrufsformular, das du für deinen Widerruf 
            gegenüber dem jeweiligen Anbieter verwenden kannst. Du bist nicht verpflichtet, dieses Formular zu verwenden.
          </p>

          <div class="print-area">
            <h3>Muster-Widerrufsformular</h3>
            <p class="note">
              Bitte an den jeweiligen Anbieter senden. Die Kontaktdaten findest du in der Terminbestätigung.
            </p>
            <form class="mf-grid">
              <div class="full">
                <label>Empfänger (Anbieter)</label>
                <input type="text" placeholder="Name und Anschrift des Anbieters">
              </div>
              <div class="full">
                <label>Ich widerrufe den von mir geschlossenen Vertrag über folgende Leistung</label>
                <textarea placeholder="Art der Leistung, ggf. Bezeichnung des Termins"></textarea>
              </div>
              <div>
                <label>Gebucht am (Datum)</label>
                <input type="date">
              </div>
              <div>
                <label>Vereinbarter Termin</label>
                <input type="date">
              </div>
              <div class="full">
                <label>Dein Name</label>
                <input type="text" placeholder="Vor- und Nachname">
              </div>
              <div class="full">
                <label>Deine Anschrift</label>
                <input type="text" placeholder="Straße, Hausnummer, PLZ, Ort">
              </div>
              <div class="full">
                <label>Datum & Unterschrift (bei Brief)</label>
                <input type="text" placeholder="Ort, Datum, Unterschrift">
              </div>
            </form>
            <p class="note" style="margin-top:10px">
              Du kannst dieses Formular ausdrucken oder die Angaben in einer eigenen E-Mail / einem eigenen Schreiben verwenden.
            </p>
          </div>

          <p class="note" style="margin-top:12px">
            <strong>Kein Ersatz für Rechtsberatung:</strong> Diese Hinweise dienen der allgemeinen Information und 
            stellen keine Rechtsberatung dar. Für eine rechtssichere Gestaltung deiner Widerrufsbelehrung solltest du 
            dich an eine anwaltliche Kanzlei oder eine spezialisierte Beratungsstelle wenden.
          </p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container foot-grid">
      <div>
        <div class="brand" style="margin-bottom:10px">
          <div class="brand-logo" aria-hidden="true">
            <img src="/static/terminmarktplatz-logo.png" alt="Terminmarktplatz Logo klein">
          </div>
          <div class="brand-title">Terminmarktplatz</div>
        </div>
        <p class="muted">Ein AlltagsBuddy-Projekt: smarte Lösungen für deinen Alltag.</p>
      </div>
      <div class="foot-col">
        <h4>Produkt</h4>
        <a class="foot-link" href="anbieter.html">Für Anbieter</a>
        <a class="foot-link" href="suchende.html">Für Suchende</a>
      </div>
      <div class="foot-col">
        <h4>Rechtliches</h4>
        <a class="foot-link" href="impressum.html">Impressum</a>
        <a class="foot-link" href="datenschutz.html">Datenschutz</a>
        <a class="foot-link" href="agb.html">AGB</a>
        <a class="foot-link" href="widerruf.html">Widerruf</a>
      </div>
      <div class="foot-col">
        <h4>Kontakt</h4>
        <a class="foot-link" href="kontakt.html">Kontaktformular</a>
        <a class="foot-link" href="mailto:info@terminmarktplatz.de">info@terminmarktplatz.de</a>
      </div>
    </div>
    <div class="container copyright">
      © <span id="y"></span> Terminmarktplatz · Alle Rechte vorbehalten.
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // User-Menü Logik (mobil) inkl. Auth-Status – wie auf den anderen Seiten
    (function(){
      const APIforMenu = ((h)=> (h==='localhost'||h==='127.0.0.1') ? 'http://127.0.0.1:5000' : 'https://api.terminmarktplatz.de')(location.hostname);

      const btn  = document.getElementById('userMenuBtn');
      const menu = document.getElementById('userMenu');
      if(!btn || !menu) return;

      const authOutEls = menu.querySelectorAll('.auth-out');
      const authInEls  = menu.querySelectorAll('.auth-in');

      function setAuthVisible(isLoggedIn){
        authOutEls.forEach(el => { el.style.display = isLoggedIn ? 'none' : ''; });
        authInEls.forEach(el  => { el.style.display  = isLoggedIn ? '' : 'none'; });
      }

      async function checkAuth(){
        try{
          const res = await fetch(`${APIforMenu}/me`, { credentials:'include' });
          setAuthVisible(res.ok);
        }catch(e){
          setAuthVisible(false);
        }
      }

      function openMenu(open){
        menu.hidden = !open;
        btn.setAttribute('aria-expanded', String(open));
      }

      btn.addEventListener('click', (e)=>{
        e.stopPropagation();
        openMenu(menu.hidden);
      });

      document.addEventListener('click', ()=> openMenu(false));
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') openMenu(false); });

      menu.addEventListener('click', async (e)=>{
        const el = e.target.closest('.item');
        if(!el) return;
        const action = el.dataset.action;

        if(action === 'logout'){
          try{
            await fetch(`${APIforMenu}/auth/logout`, { method:'POST', credentials:'include' });
          }catch(_){}
          location.href = '/login.html';
        }

        if(action === 'delete'){
          const ok = confirm('Wirklich den gesamten Account mit allen Slots und Buchungen löschen? Dieser Schritt ist endgültig.');
          if(!ok) return;
          try{
            const res = await fetch(`${APIforMenu}/me`, { method:'DELETE', credentials:'include' });
            if(res.ok){
              location.href = '/login.html?deleted=1';
            }else{
              const data = await res.json().catch(()=>({}));
              alert(data?.error ? `Löschen fehlgeschlagen: ${data.error}` : 'Löschen fehlgeschlagen.');
            }
          }catch(err){
            alert('Netzwerkfehler – bitte später erneut versuchen.');
          }
        }
      });

      checkAuth();
    })();
  </script>
</body>
</html>
